# 성능 개선 스토리라인 (포트폴리오용)

## 문제 (Problem)
- `/promos`는 프론트 친화 포맷으로 대량 데이터를 반환하며, 트래픽이 늘면 DB/네트워크 비용이 같이 증가한다.
- 스크래핑 결과 저장은 전체 삭제 후 재삽입 구조라 배치 시점 비용이 크다.
- 스크래퍼는 브랜드 단위로 순차 실행되어 총 실행 시간이 길어진다.

## 가설 (Hypothesis)
- API 조회 비용을 줄이고(응답 경량화/캐시), 스크래핑 실행 시간을 줄이면(병렬화) p95와 RPS가 함께 개선된다.

## 실험 (Experiment)
1. 기준선 계측
   - `npm run perf:collect`
2. 개선 1차
   - `/promos` 응답 경량화 또는 캐시
3. 개선 2차
   - 스크래퍼 병렬 실행(브랜드별 bounded concurrency)
4. 개선 3차
   - 전체 delete-insert 방식 개선(업서트/스테이징 스왑)

## 결과 (Result)
- 개선 전/후를 `docs/performance-metrics.md` 표로 관리
- raw 데이터는 `test-results/perf/api-perf-*.json`로 보관

## 한계 (Limitations)
- 외부 브랜드 사이트 품질/차단/지연은 앱 내부 최적화만으로 완전 통제 불가
- 스크래핑 실패 시 fallback 데이터가 섞일 수 있어 데이터 품질 모니터링 필요

## 면접 포인트
1. 왜 이 지표를 선택했는가
2. 왜 이 개선안을 먼저 적용했는가
3. 어떤 리스크를 감수했고 어떻게 완화했는가
